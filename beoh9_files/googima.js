!function(){var C="googima",S="TYPE_API",M="TYPE_SCHEDULE",_="-1",o="jwp",n="jw-flag-ads-googleima",u="jw-flag-ads-vpaid",p="jw-flag-ads-vpaid-controls",t="paused",h="playing",e="adBidRequest",a="adBidResponse",r="adBreakStart",d="adBreakEnd",L="adCompanions",x="adError",T="adStarted",c="adPlay",I=2e3;function g(e,t,i){if(!e)return e;for(var n,r,o,a,s=t.getPlaylistItem(),d=t.getConfig(),l=e.replace("__random-number__",Math.random()*Math.pow(10,18)).replace("__timestamp__",(new Date).getTime()).replace("__page-url__",encodeURIComponent(window.location.href)).replace("__referrer__",encodeURIComponent(document.referrer)).replace("__player-height__",t.getHeight()||d.height).replace("__player-width__",t.getWidth()||d.width).replace("__item-duration__",(r=t.getDuration(),o=3,a=Math.pow(10,o),Math.round(r*a)/a)).replace("__domain__",encodeURIComponent((n=window.location.href.match(new RegExp(/^[^/]*:\/\/\/?([^/]*)/)))&&1<n.length?n[1]:"")),u=(l=i.companiondiv&&i.companiondiv.id?l.replace("__companion-div__",i.companiondiv.id):l.replace("__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),p=0;u&&p<u.length;p++){var h=u[p],c=h.substring(7,h.length-2);if(s.hasOwnProperty(c)&&t._.isString(s[c])){var g=s[c];1e3<g.length&&(g=g.substring(0,1e3)),l=l.replace(h,encodeURIComponent(g))}else l=l.replace(h,"")}if(s.title&&-1===l.indexOf("vid_t=")){var f=s.title.substring(0,100).replace(/[^\x00-\x7F]/g,"");l+=(-1!==l.indexOf("?")?"&":"?")+"vid_t="+encodeURIComponent(f)}return l}var v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function l(e,t,i){if("start"===e||"0%"===e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||-1<i.indexOf(e,"%"))return e;var n=t.seconds(e);return!!i.isNumber(n)&&n}function s(e,t,i){var n,r,o,a,s,d=l(e,t,i);return d||(d="pre"),i.isNumber(d)&&(n=parseInt(1e3*d,10),r=Math.floor(n)%1e3,o=Math.floor(n/1e3)%60,a=Math.floor(n/6e4)%60,d=(s=(s=Math.floor(n/36e5)%24)<10?"0"+s:s)+":"+(a=a<10?"0"+a:a)+":"+(o=o<10?"0"+o:o)+"."+(r=("000"+r).slice(-3))),d}function f(e,t,i){if(!i)return e;var n=0<=e.indexOf("?")?"&":"?",r="cust_params=",o=e.indexOf(r),a=r.length,s="",d="";if(t.foreach(i,function(e,t){s=""+s+d+e+"="+t,d="&"}),s=encodeURIComponent(s),0<=o){var l=e.substr(0,o+a),u=e.substr(o+a);return""+l+s+"%26"+u}return""+e+n+"cust_params="+s}function m(e,r,o){var a={};return r.foreach(e,function(e,t){var i={},n=t.ad||t;i.offset=s(n.offset||n.position||t.offset||"",r,o),i.tag=f(n.tag,r,n.custParams),i.type=n.type||t.type||"linear,nonlinear",a[e]=i}),a}var y=function(){function i(e,t){v(this,i),this.player=e,this.options=t}return i.prototype.getAdsResponse=function(e){var r=this,o=this.player,t=o.utils,a='<vmap:AdBreak breakType="_type_" breakId="_adbreakname_" timeOffset="_offset_"><vmap:AdSource allowMultipleAds="true" followRedirects="true" id="_adbreakname_-ad-1"><vmap:AdTagURI><![CDATA[_url_]]></vmap:AdTagURI></vmap:AdSource></vmap:AdBreak>',s=[],d=[],l=[];return t.foreach(m(e,t,o._),function(e,t){var i=t.offset.replace("pre","start").replace("post","end"),n=a.replace(/_type_/g,t.type).replace(/_adbreakname_/g,e).replace(/_offset_/g,i).replace(/_url_/g,g(t.tag,o,r.options,t.custParams));"start"===i?s.push(n):"end"===i?l.push(n):d.push(n)}),'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+s.join("")+d.join("")+l.join("")+"</vmap:VMAP>"},i.prototype.getTagMap=function(e){var n=this,r=this.player,o=r.utils,a={};return o.foreach(m(e,o,r._),function(e,t){var i=l(t.offset,o,r._);r._.isString(i)&&(i=parseFloat(i.replace("pre","0").replace("post","-1"))),r._.isNumber(i)&&(a[i]=g(t.tag,r,n.options))}),a},i.prototype.getTagList=function(e){var n=this,r=this.player,o=r.utils,a=[];return o.foreach(m(e,o,r._),function(e,t){var i=l(t.offset,o,r._);r._.isString(i)&&(i=parseFloat(i.replace("pre","0").replace("post","-1"))),a.push({offset:i,tag:g(t.tag,r,n.options)})}),a},i}(),b={adcountercountkey:"__AD_POD_CURRENT__",adcounterdynamic:"Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",adcountertotalkey:"__AD_POD_LENGTH__",admessage:"This ad will end in xx",admessagedynamickey:"xx",admessagestatic:"This is an Advertisement",advideoheight:0,advideowidth:0,allowadskip:!1,allowadskippastseconds:0,allowplayercontrols:!1,allowvolumeslider:!1,autoplayadsmuted:!1,click_tracking:!0,companiondiv:null,companionResourceType:"",cuetext:"Advertisement",debug:!1,enablePreloading:!1,invertmutebutton:!1,loadVideoTimeout:15e3,locale:"",maxRedirects:-1,overlayslotheight:0,overlayslotwidth:0,premiumAds:!1,requestTimeout:1e4,scaled_ads:!0,usestaticmessage:!1,vpaidcontrols:!1,vpaidmode:"insecure"};function w(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}var k=function(){function a(e,t){for(var i in v(this,a),this.config=e,this.utils=t,this.bidsResponse={},b)if(b.hasOwnProperty(i)){var n=e[i],r=b[i],o=typeof r;if(void 0!==n){if("boolean"!==o&&"number"!==o||(n=w(n)),typeof n!==o)throw new Error("invalid parameter: "+i+" should be a "+o);this[i]=n}else this[i]=r}this.admessagedynamic=this.admessage}return a.prototype.getSingleTagPrerollBlock=function(){var e=this.getConfigSchedule(),t=this.singleTagBidsResponse;if("string"==typeof e){if(!t)return e;var i=t.custParams;return f(t.tag,this.utils,i)}return null},a.prototype.addBidsResponse=function(e,t){var i=void 0;i=e&&!e.error&&(e.bidWon||e.tag)?e:null,t?this.bidsResponse[t]=i:this.singleTagBidsResponse=i},a.prototype.getSchedule=function(){var n=this,e=this.getConfigSchedule();if(!e)return e;var r=this.utils.extend({},e),t=this.getSingleTagPrerollBlock();return t||(Object.keys(this.bidsResponse).forEach(function(e){var t=r[e],i=n.bidsResponse[e];t&&i&&(t.tag=i.tag,t.custParams=n.utils.extend({},t.custParams,i.custParams))}),r)},a.prototype.getConfigSchedule=function(){var e=this.config;return e.tag||this.adschedule||e.schedule||e.ad},a.prototype.getAdRules=function(){var e=this.config.rules||{};return{startOn:e.startOn||1,frequency:void 0!==e.frequency?e.frequency:1}},a}(),j=function(){function r(e,t,i){v(this,r);var n=document.createElement("div");this.visible=!1,this.style=i,this.div=e,(this.adDiv=n).id=t+"_ad",i(e,{overflow:"hidden",width:"100%",height:"100%",display:"block",visibility:"hidden",pointerEvents:"none",opacity:0}),i(n,{position:"absolute",width:"100%",height:"100%"}),e.appendChild(n)}return r.prototype.resizeNonLinear=function(e,t){this.style(this.div,{height:t+"px",top:"auto",width:"100%"})},r.prototype.resizeLinear=function(){this.style(this.div,{top:"0px",left:"0px",width:"100%",height:"100%"})},r.prototype.getAdDiv=function(){return this.adDiv},r.prototype.adSetup=function(){this.visible=!0,this.style(this.div,{visibility:"visible",display:"block",pointerEvents:"all",opacity:1},!0);for(var e=this.adDiv.childNodes,t=0;t<e.length;t++){var i=e[t];("DIV"!==i.tagName||i.hasChildNodes())&&this.style(i,{width:"100%",height:"100%"})}},r.prototype.adTakeDown=function(){this.visible=!1,this.style(this.div,{visibility:"hidden",pointerEvents:"none",opacity:0});for(var e=this.adDiv.childNodes,t=0;t<e.length;t++)this.style(e[t],{width:"",height:""})},r}(),A=null,P=-1;function D(){return P}function R(e){if(A)return A;if(window.google&&google.ima&&google.ima.AdDisplayContainer)return A=Promise.resolve();var t=["//","imasdk.googleapis.com/js/sdkloader/ima3.js"];"file:"===document.location.protocol&&t.unshift("https:");var i=new e.scriptloader(t.join(""));return A=i.load().then(function(){P=Date.now()})}var i={};function B(e,n){var r=this,t=i[n];return t||(this.jwplayerEntitlements=function(e,t,i){var n={canPlayAds:!0},r=new e.key(t),o=r.edition();if("unlimited"===o)return i(n);var a=r.token(),s=["//","entitlements.jwplayer.com","/",a,".json"];"file:"===window.location.protocol&&s.unshift("https:"),e.ajax(s.join(""),function(e){n.canPlayAds=!e||!e.response||!1!==e.response.canPlayAds,i(n)},function(){i(n)},{timeout:1e4,responseType:"json"})},i[n]=new Promise(function(t,i){r.jwplayerEntitlements(e,n,function(e){e.canPlayAds?t():i({message:"Ad Limit Reached"})})}))}var O=function(){function n(e,t,i){v(this,n),e.extend(this,t),this.vol=0,this.imaProxy=null,this.view=i}return n.prototype.setProxy=function(e){this.imaProxy=e,"boolean"==typeof this.muted&&this.mute(this.muted)},n.prototype.attachMedia=function(){},n.prototype.detachMedia=function(){},n.prototype.mute=function(e){this.muted=e,this.imaProxy&&(e?this.imaProxy.setVolume(0):this.vol&&this.imaProxy.setVolume(this.vol),this.muteAllAdContainerVideo(e))},n.prototype.muteAllAdContainerVideo=function(e){for(var t=this.view.getAdDiv().getElementsByTagName("video"),i=0;i<t.length;i++)t[i].muted=e},n.prototype.volume=function(e){this.vol=e/100,this.imaProxy&&this.imaProxy.setVolume(this.vol)},n}(),E=window.performance||Date;function q(){return E.now()}function N(t,i){return i&&Object.keys(i).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}),t}function U(r,o){return new Promise(function(t,e){setTimeout(t,o);var i=document.createElement("script");i.onload=i.onreadystatechange=function(e){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(e),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i))},i.onerror=e,i.type="text/javascript",i.charset="utf-8",i.async=!0,i.timeout=o,i.src=r;var n=document.getElementsByTagName("head")[0]||document.documentElement;n.insertBefore(i,n.firstChild)}).catch(function(){return Promise.reject("Error loading script")})}"now"in E||(E.now=function(){return(new Date).getTime()});var V=1e3,W=1e3,G="usd",F="video",z="2962993",J="//c.amazon-adsystem.com/aax2/apstag.js",X="js-sec.indexww.com/htv/htv-jwplayer.min.js",H="js.spotx.tv/directsdk/v1/",K="search.spotxchange.com/ad/vast.html?key=",Q=["SpotX","FAN","index","APS"],Y=encodeURIComponent(window.location.href);function Z(e,t){return{id:e,name:"FAN",error:!0,message:t}}function $(u,p){var e,t,i,n,r,o,a=u.xhttpFAN,s=u.settings,h=u.bidders.FAN.id,c=u.tag,g=s.floorPriceCents,f=s.playerWidth,m=s.playerHeight,d=(t=f,i=m,(e=h)?["https://an.facebook.com/v2/placementbid.json?&placementids[]="+e,"&playerwidth="+t,"&playerheight="+i,"&adformats[]="+F,"&sdk="+z,"&pageurl="+Y].join(""):null),y=s.mediationLayerAdServer;return n=y,r=g,o=s.floorPriceCurrency||G,!d||!n&&(!r||"usd"!==o)?p(Z(h,"invalid")):(a.onreadystatechange=function(){if(4===this.readyState){if(clearTimeout(u.currentTimeout),200!==this.status)return p(Z(h,"Invalid response (status "+this.status+")"));var e=JSON.parse(this.responseText),t=e.errors;if(t&&t.length)return p(Z(h,t[0]));var i=e.bids;if(!i||!i[h]||!i[h][0])return p(Z(h,"No bids for placement id"));var n=i[h][0],r=n.bid_price_cents,o=n.bid_id;if("dfp"===y){var a=Math.round(r/100);return p({id:h,name:"FAN",tag:c,custParams:{jwFANBidPrice:a,jwFANBidID:o}})}var s=n.bid_price_currency,d=g<r,l={id:h,name:"FAN",bidWon:d,priceCents:r,priceCurrency:s};return d&&(l.tag=["https://an.facebook.com/v1/instream/vast.xml?placementid="+h,"&playerwidth="+f,"&playerheight="+m,"&sdk="+z,"&bidid="+o,"&pageurl="+Y].join("")),p(l)}},a.open("GET",d),a.withCredentials=!0,a.send(null),{id:h,name:"FAN"})}var ee={},te=null;function ie(){if(te)return te;if(ee.apstag=ee.apstag||window.apstag,ee.apstag&&ee.apstag.init&&ee.apstag.fetchBids)return te=Promise.resolve();var e=["//",J];return"file:"===document.location.protocol&&e.unshift("https:"),te=U(e.join(""),W).then(function(){ee.apstag=window.apstag})}function ne(t,i){var n=t.bidders.APS;return n.id&&n.slotID?(ie().then(function(){return ee.apstag.init({id:n.pubId,adServer:n.adServer}),ee.apstag.fetchBids({slots:[{slotID:n.slotID}],timeout:t.settings.bidTimeout},function(e){return e&&e[0]&&e[0].slotID===n.slotID?i({id:n.id,name:"APS",tag:t.tag,custParams:{amznbid:e[0].amznbid,amzniid:e[0].amzniid}}):i({id:n.id,name:"APS",error:!0,message:"No bids for pubID and slotID"})})}).catch(function(){i({id:n.id,name:"APS",error:!0,message:"Amazon header bidding failed"})}),{id:n.id,name:"APS"}):i({id:n.id,name:"APS",error:!0,message:"invalid"})}var re=null;function oe(e){if(re)return re;if(ee.SpotX=ee.SpotX||window.SpotX,ee.SpotX&&ee.SpotX.DirectAdOS)return re=Promise.resolve();var i,n,t=["//",H,e,".js"];return"file:"===document.location.protocol&&t.unshift("https:"),re="function"==typeof require?(i=t.join(""),n=W,new Promise(function(e,t){setTimeout(t,n),require([i],e)}).catch(function(){return Promise.reject("Error loading script")})).then(function(e){ee.SpotX=e}):U(t.join(""),W).then(function(){ee.SpotX=window.SpotX})}function ae(e,t){return{id:e,name:"SpotX",error:!0,message:t}}function se(t,e){var r=t.bidders.SpotX;if(!r||!r.id)return e(ae(r.id,"invalid"));var i=t.settings,n=N({channel_id:r.id,slot:i.playerContainer,content_width:i.playerWidth,content_height:i.playerHeight,player_vendor:"SpotXJW",player_vendor_id:i.playerId,ad_volume:i.adVolume,autoplay:i.autoplay,start_delay:i.offset,placement:1,hide_skin:!0},r.optionalParams);return r.passFloorPrice&&i.floorPriceCents&&(n.price_floor=i.floorPriceCents/100),"pre"===i.offset&&(n.start_delay=0),"post"===i.offset&&(n.start_delay=-2),oe(r.id).then(function(){var e=new ee.SpotX.DirectAdOS(n);return"dfp"===i.mediationLayerAdServer?e.addSpotXParamsToMVT(t.tag):e.getAdServerKVPs()}).then(function(e){if("string"==typeof e)return{id:r.id,name:"SpotX",tag:e};var t=100*parseFloat(e.spotx_bid),i=e.spotx_ad_key,n=["//",K,i];return"file:"===document.location.protocol&&n.unshift("https:"),{id:r.id,name:"SpotX",priceCents:t,tag:n.join(""),tagKey:i}}).catch(function(e){return ae(r.id,"SpotX header bidding failed: "+e)}).then(e),{id:r.id,name:"SpotX"}}var de=null;function le(e){if(de)return de;if(ee.indexapi=ee.indexapi||window.indexapi,ee.indexapi)return de=Promise.resolve();var t=["//",e||X];return"file:"===document.location.protocol&&t.unshift("https:"),de=U(t.join(""),W).then(function(){ee.indexapi=window.indexapi})}function ue(e,t){return{id:e,name:"index",error:!0,message:t}}function pe(i,n){var e=i.bidders.index||{};if(!e.script&&!e.id&&!ee.indexapi)return n(ue(e.id,"invalid"));var r=N({videoCommonArgs:{protocols:[2,3,5,6],mimes:["video/mp4","video/webm","application/javascript"],apiList:[1,2]},siteID:e.id},e);return setTimeout(function(){n(ue(r.id,"Index Exchange header bidding request failed"))},i.settings.bidTimeout),le().then(function(){var e=function(e,t){if(void 0!==t)return n({id:r.id,name:"index",tag:i.tag,custParams:t});n(ue(r.id,"Index Exchange header bidding request failed"))};ee.indexapi=ee.indexapi||{},ee.indexapi.deferQueue=ee.indexapi.deferQueue||[],ee.indexapi.deferQueue.push(function(){ee.indexapi.solicitIndexVideoAds(i.tag,e,r)})}).catch(function(){n(ue(r.id,"Index Exchange header bidding failed"))}),{id:r.id,name:"index"}}var he=function(e){return!(e.error&&"invalid"===e.message)};function ce(n){var r={SpotX:{},FAN:{},APS:{}};return n.length&&Q.forEach(function(t){var e=function(e,t){if(!e||"function"!=typeof t)return null;for(var i=Object(e),n=i.length,r=0;r<n;){var o=i[r];if(t.call(null,o,r,i))return o;r+=1}return null}(n,function(e){return e.name===t});if(e){var i=N({},e);r[t]=N(i,e.custom_params)}}),r}var ge=function(){function y(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{settings:{},bidders:[]},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.tag,r=void 0===n?"":n,o=i.offset,a=void 0===o?"":o,s=i.width,d=void 0===s?0:s,l=i.height,u=void 0===l?0:l,p=i.container,h=i.playerId,c=i.autoplay,g=i.adVolume;v(this,y);var f,m=e.bidders;"pre"!==a&&0!==parseInt(a)&&(m=m.filter(function(e){return"SpotX"===e.name})),this.tag=r,this.settings=(f=e.settings,N({bidTimeout:V,playerWidth:d,playerHeight:u,playerContainer:p,playerId:h,offset:a,autoplay:c,adVolume:g},f)),this.bidders=ce(m),this.xhttpFAN=new XMLHttpRequest,this.request=new Promise(function(e){t.resolve=e}),this._bidRequests=[],this.bidders.APS&&this.bidders.APS.id&&this.bidders.APS.slotID&&ie(),this.bidders.index&&(this.bidders.index.script||this.bidders.index.id)&&le(this.bidders.index.script),this.bidders.SpotX&&this.bidders.SpotX.id&&oe(this.bidders.SpotX.id),this.currentTimeout=null}return y.prototype.start=function(){return this.start=function(){return this.request},this._bidRequests=function(l){var e=[];e="dfp"===l.settings.mediationLayerAdServer?[se,$,ne,pe]:[se,$];var n=[],t=e.map(function(e){var t=q();return new Promise(function(t){var i=e(l,t)||{};n.push(function(e){t(N(i,e))})}).then(function(e){return e.timeForBidResponse=q()-t|0,e})});return Promise.all(t).then(function(e){var n="dfp"===l.settings.mediationLayerAdServer,r={priceInCents:l.settings.floorPriceCents},o={},a=void 0,s=[],d={};return d.bidders=e.filter(he).map(function(e){var t=!e.error,i={id:e.id,name:e.name,result:t?"bid":"noBid",timeForBidResponse:e.timeForBidResponse,winner:!!n&&void 0};return"timeout"===e.message&&(i.result=e.message),t&&(s.push(e),e.priceCents&&(i.priceInCents=e.priceCents),e.tagKey&&(i.tagKey=e.tagKey),N(o,e.custParams),"SpotX"===e.name&&(a=e.tag),!n&&e.priceCents>=r.priceInCents&&(r=i,d.result=e)),i}),n?s.length&&(d.result=1===s.length?s[0]:{tag:a||l.tag,custParams:o}):r.winner=!0,d}).then(l.resolve),n}(this),this.request},y.prototype.stop=function(){clearTimeout(this.currentTimeout),this.xhttpFAN&&(this.xhttpFAN.abort(),this.xhttpFAN=null),this.resolve({error:!0,message:"Request aborted"})},y.prototype.then=function(e){return this.request.then(e,e)},y.prototype.timeout=function(){var e=this;clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout(function(){if(e.currentTimeout=null,e.resolve)return 0===e._bidRequests.length?e.resolve({error:!0,message:"timeout"}):void e._bidRequests.forEach(function(e){e({error:!0,message:"timeout"})})},this.settings.bidTimeout)},y}();function fe(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return{type:e,client:C,adposition:null!==i?i:function(e){if(e.isBeforePlay()||0===e.getPosition())return"pre";if(e.isBeforeComplete()||e.getPosition()===e.getDuration())return"post";return"mid"}(t),viewable:t.getViewable()}}function me(e,t){var i=t.offset,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return{type:e,client:C,offset:i,mediationLayerAdServer:n.mediationLayerAdServer||o,floorPriceCents:n.floorPriceCents,floorPriceCurrency:n.floorPriceCurrency,bidTimeout:n.bidTimeout||V,bidders:r}}function ye(e,t){var i=t.bidders,n=t.options;return i&&n.config.bids&&n.config.bids.settings&&i.length&&(e.mediationLayerAdServer=n.config.bids.settings.mediationLayerAdServer||o,e.bidders="pre"===e.adposition?i:i.filter(function(e){return"SpotX"===e.name}),"dfp"===e.mediationLayerAdServer&&"SpotXJW"===e.adsystem&&e.bidders.map(function(e){e.winner="SpotX"===e.name})),e}var ve=function(){function s(e,t,i,n,r,o,a){v(this,s),i.utils.extend(this,i.Events),this.item=e,this.options=t,this.player=i,this.env=i.getEnvironment(),this.utils=i.utils,this.instreamProvider=n,this.view=r,this.initAdsManagerPromise=null,this.bidsPromise=null,this.blockingInstreamPlayer=null,this.currentAd=null,this.bidders=[],this.bids=null,this.timeoutAdStart=-1,this.progressIntervalId=-1,this.fullscreenIcon=i.getContainer().querySelector(".jw-icon-fullscreen"),this.adsLoaderManager=o,this.playbackProxy={currentTime:0,duration:0},this.video=a,this.isItemSchedule=!0,this.paused=!1,this.pausedByViewable=!1,this._qoe=new i.utils.Timer,this.debugConsoleLog=i.utils.noop,t.debug&&(this.debugConsoleLog=function(){var e;(e=console).log.apply(e,arguments)})}return s.prototype.startBid=function(t,i,n){var r=this,o=this.utils.extend({},t.config.bids);return this.bids=new ge(o,{tag:i.tag,offset:i.offset,width:this.player.getWidth(),height:this.player.getHeight(),container:this.player.getContainer(),playerId:this.player.id,autoplay:this.player.getConfig().autostart,adVolume:this.player.getVolume()}),this.bids.start(),this.trigger(e,me(e,i,o.settings,o.bidders)),this.bids.then(function(e){if(r.trigger(a,me(a,i,o.settings,e.bidders)),r.bidders&&"pre"!==i.offset&&0!==parseInt(i.offset)||(r.bidders=e.bidders),r.destroyed())return null;t.addBidsResponse(e.result,n)})},s.prototype.init=function(e,t){var s=this;if(t.config.bids){var i=t.config.schedule||t.config.tag,n=[];"string"==typeof i?n.push(this.startBid(t,{tag:i,offset:"pre"})):Object.keys(i).forEach(function(e){n.push(s.startBid(t,i[e],e))}),this.bidsPromise=Promise.all(n)}else this.bidsPromise=Promise.resolve();this.initAdsManagerPromise=this.bidsPromise.then(R).then(function(){return s.destroyed()?null:(s.debugConsoleLog("[JW DEBUG] Open adsLoaderManager"),s.adsLoaderManager.open(e,t,s.player,s.options,s.video))}).then(function(e){if(s.destroyed())return null;var t=s.playbackProxy,i=s.adsLoaderManager,n=i.getAdsManager(e,t,s.options);s.instreamProvider.setProxy(n),s.muteInstreamProvider();var r=s.player.getSafeRegion(!1);if(s.debugConsoleLog("[JW DEBUG] adsManager init with",r.width,r.height,s.getViewMode()),n.init(r.width,r.height,s.getViewMode()),i.initializeDisplay(),i.bindEvents({LOADED:s.adLoaded.bind(s),AD_ERROR:s.adError.bind(s),CONTENT_PAUSE_REQUESTED:s.pauseRequested.bind(s),CONTENT_RESUME_REQUESTED:s.resumeRequested.bind(s),LOG:s.adLog.bind(s),STARTED:s.adStarted.bind(s),IMPRESSION:s.adImpression.bind(s),LINEAR_CHANGED:s.resize.bind(s),CLICK:s.adClick.bind(s),PAUSED:s.adPaused.bind(s),RESUMED:s.adResumed.bind(s),SKIPPED:s.adSkipped.bind(s),USER_CLOSE:s.adUserClose.bind(s),ALL_ADS_COMPLETED:s.allAdsCompleted.bind(s)}),s.isItemSchedule){var o=n.getCuePoints();if("string"==typeof i.schedule||o.length&&0===o[0]||(s.debugConsoleLog("[JW DEBUG] Stop blocking since there is no preroll"),s.stopBlocking()),o.length){var a=o.filter(function(e){return 0<e}).map(function(e){return{begin:e,text:s.options.cuetext}});s.player.setCues(a)}}return n}).catch(function(e){throw s.asyncError(e),e})},s.prototype.getViewMode=function(){var e=google.ima.ViewMode;return this.player.getFullscreen()?e.FULLSCREEN:e.NORMAL},s.prototype.prepareToPlayAd=function(e){if(!this.destroyed())if(this.blockingInstreamPlayer){var t=e?"":this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(t)}else clearTimeout(this.timeoutAdStart),this.startBlocking(e)},s.prototype.muteInstreamProvider=function(){var e=this.video.muted||this.player.getMute()||0===this.adsLoaderManager.adsManager.getVolume();this.debugConsoleLog("[JW DEBUG] Setting mute on instreamProvider",e),this.instreamProvider.mute(e)},s.prototype.exitFullscreenOnInlineIOS=function(){this.env.OS.iOS&&(this.env.Browser.version.major<10||(this.debugConsoleLog("[JW DEBUG] Exiting fullscreen mode on iOS 10+"),this.player.setFullscreen(!1),this.utils.style(this.fullscreenIcon,{display:"none"})))},s.prototype.startBlocking=function(e){var i=this;if(!this.blockingInstreamPlayer&&!this.destroyed()){this.debugConsoleLog("[JW DEBUG] JW Player startBlocking"),this.exitFullscreenOnInlineIOS(),this.options.premiumAds&&this.player.on("viewable",function(e){e.viewable?i.pausedByViewable&&(i.debugConsoleLog("[JW DEBUG] PremiumAds mode enabled. Start playing the ad on viewable"),i.player.play()):i.paused||(i.debugConsoleLog("[JW DEBUG] PremiumAds mode enabled. Pause the ad on not viewable"),i.player.pause(),i.pausedByViewable=!0)},this),this._qoe.tick("adLoading"),this.player.utils.addClass(this.player.getContainer(),n),this.adsLoaderManager&&this.adsLoaderManager.videoProxy&&this.adsLoaderManager.videoProxy.unblock(),this.blockingInstreamPlayer=this.player.createInstream().init();var t=e?"":this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(t),this.blockingInstreamPlayer.applyProviderListeners(this.instreamProvider),this.initAdsManagerPromise.then(function(e){i.debugConsoleLog("[JW DEBUG] Start adsManager"),e.start()}).catch(function(){}),clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){if(i.debugConsoleLog("[JW DEBUG] Ad request timeout"),!i.destroyed()){i.stopBlocking(),i.asyncDiscardAdBreak();var e={message:"Ad Request timeout after "+i.options.requestTimeout+" milliseconds",getErrorCode:function(){return 60004}},t=i.adsLoaderManager.adErrorEventObject(e,{});i.trigger(x,t)}},this.options.requestTimeout)}},s.prototype.stopBlocking=function(){this.destroyed()||(this.debugConsoleLog("[JW DEBUG] JW Player stopBlocking"),this.player.off("viewable",null,this),clearTimeout(this.timeoutAdStart),this.utils.style(this.fullscreenIcon,{display:""}),this.player.utils.removeClass(this.player.getContainer(),[u,p,n]),this.blockingInstreamPlayer&&(this.adsLoaderManager&&this.adsLoaderManager.videoProxy&&this.adsLoaderManager.videoProxy.block(),this.instreamProvider.off(),this.blockingInstreamPlayer.destroy(),this.blockingInstreamPlayer=null,this.view.adTakeDown()))},s.prototype.pauseRequested=function(e){var t=this;this.prepareToPlayAd();var i=this.adsLoaderManager.adEventObject(e.getAd());this.player.trigger(r,fe(r,this.player,i.adposition)),this.blockingInstreamPlayer.on("destroyed",function(){t.player.trigger(d,fe(d,t.player,i.adposition))})},s.prototype.resumeRequested=function(){this.debugConsoleLog("[JW DEBUG] ResumeRequest from IMA SDK"),this.currentAd&&this.currentAd.isLinear()&&(this.finishAd(),this.view.adTakeDown()),this.stopBlocking()},s.prototype.finishAd=function(){this.currentAd&&(clearInterval(this.progressIntervalId),this.currentAd=null)},s.prototype.discardAdBreak=function(e){!e&&this.adsLoaderManager&&(e=this.adsLoaderManager.adsManager),!this.destroyed()&&e&&(e.discardAdBreak(),e.stop())},s.prototype.asyncDiscardAdBreak=function(){var t=this;this.initAdsManagerPromise.then(function(e){return t.discardAdBreak(e)}).catch(function(){})},s.prototype.pause=function(){this.pausedByViewable=!1;var e=this.adsLoaderManager.adsManager;e&&(this.debugConsoleLog("[JW DEBUG] JW Player pause ad"),e.pause())},s.prototype.resume=function(){this.pausedByViewable=!1;var e=this.adsLoaderManager.adsManager;e&&(this.debugConsoleLog("[JW DEBUG] JW Player resume ad"),e.resume())},s.prototype.beforePlay=function(e){var t=this;this.bids&&this.bids.timeout&&this.bids.timeout(),this.player.off("beforePlay",null,this),this.isItemSchedule=!!e,this.prepareToPlayAd(this.isItemSchedule),this.adsLoaderManager.initializeDisplay(),this._qoe.tick("adBeforePlay"),this.bidsPromise.then(R).then(function(){t.destroyed()||(t.debugConsoleLog("[JW DEBUG] Request ads to IMA SDK"),t.adsLoaderManager.requestAds())}).catch(this.utils.noop)},s.prototype.beforeComplete=function(){var e=this.adsLoaderManager.adsManager;e&&-1<e.getCuePoints().indexOf(-1)&&this.prepareToPlayAd(),this.adsLoaderManager.unbindEvents(["CONTENT_RESUME_REQUESTED"]),this.playbackProxy.currentTime=this.playbackProxy.duration,this.debugConsoleLog("[JW DEBUG] Call contentComplete on IMA SDK"),this.adsLoaderManager.contentComplete()},s.prototype.time=function(e){this.playbackProxy.currentTime=e.position,e.duration>=e.position?this.playbackProxy.duration=e.duration:this.playbackProxy.duration=1/0},s.prototype.resize=function(){var e=this.currentAd,t=this.adsLoaderManager.adsManager;if(t){var i=e&&!e.isLinear(),n=this.player.getSafeRegion(i);if(i){var r=e.getHeight();r=this.player.getFullscreen()?n.height/2:Math.max(100,r+10),this.debugConsoleLog("[JW DEBUG] Resize adsManager",n.width,r,this.getViewMode()),t.resize(n.width,r,this.getViewMode()),this.view.resizeNonLinear(n,r)}else this.debugConsoleLog("[JW DEBUG] Resize adsManager",n.width,n.height,this.getViewMode()),t.resize(n.width,n.height,this.getViewMode()),this.view.resizeLinear()}},s.prototype.triggerAdPlay=function(e,t,i,n){if(e.isLinear()){this.instreamProvider.trigger("state",{newstate:i,oldstate:n});var r=this.adsLoaderManager.adEventObject(e);r.oldstate=n,r.newstate=i,this.trigger(t,r)}},s.prototype.progressInterval=function(s,d){var l=this;if(clearInterval(this.progressIntervalId),d){var u=s.getAdId(),p=s.getAdPodInfo(),h=-1,c=this.options.admessage||"",g=new RegExp(this.options.admessagedynamickey,"g"),f=this.options.adcounterdynamic||"",m=new RegExp(this.options.adcountercountkey,"g"),y=new RegExp(this.options.adcountertotalkey,"g");this.progressIntervalId=setInterval(function(){if(l.currentAd&&l.currentAd.getAdId()===u){var e=d.getRemainingTime();if(!(isNaN(e)||e<=0)&&h!==e){h=e;var t=s.getDuration(),i=t-e;if(l.blockingInstreamPlayer){var n=c.replace(g,Math.round(t-i)),r=p.getTotalAds();if(1<r){var o=p.getAdPosition();n=f.replace(m,o).replace(y,r)+"  "+n}l.blockingInstreamPlayer.setText(n),l.instreamProvider.trigger("time",{duration:t,position:i})}if(0<t){var a=l.adsLoaderManager.adEventObject(s);a.position=i,a.duration=t,l.trigger("adTime",a)}}}else clearInterval(l.progressIntervalId)},250)}},s.prototype.adLoaded=function(e){this.muteInstreamProvider();var t=this.adsLoaderManager.adEventObject(e.getAd());this.trigger("adRequest",t)},s.prototype.adStarted=function(e){var t=e.getAd(),i=this.adsLoaderManager.adEventObject(t);this.trigger(T,i)},s.prototype.adImpression=function(e){var t=this,i=e.getAd(),n=i.isLinear(),r=n&&(0<=i.getContentType().indexOf("image")||-1===i.getDuration()),o=i.getContentType(),a="application/javascript"===o||"application/x-shockwave-flash"===o,s=n&&a&&this.options.vpaidcontrols;this.currentAd=i,this.blockingInstreamPlayer&&this.blockingInstreamPlayer.setSkipOffset(i.getSkipTimeOffset()),this.adsLoaderManager.bindEvents({COMPLETE:this.adComplete.bind(this)}),a&&this.env.OS.mobile&&this.options.autoplayadsmuted&&this.adsLoaderManager.bindEvents({VOLUME_CHANGED:function(){t.adsLoaderManager.unbindEvents(["VOLUME_CHANGED"]),t.player.setMute(!!t.adsLoaderManager.adsManager.getVolume())}}),r?this.startBlocking():n||this.stopBlocking(),this.player.utils.toggleClass(this.player.getContainer(),u,n&&(r||a)),this.player.utils.toggleClass(this.player.getContainer(),p,s),this.view.adSetup(),this.resize(),this.muteInstreamProvider(),clearTimeout(this.timeoutAdStart);var d=this.adsLoaderManager.adsManager;this.progressInterval(i,d);var l=this.adsLoaderManager.adEventObject(i);"pre"!==l.adposition||void 0!==l.podcount&&1!==l.sequence||(this._qoe.tick("adImpression"),l.timeLoading=this._qoe.between("adBeforePlay","adImpression")),ye(l,this),this.trigger("adImpression",l),this.triggerAdPlay(i,c,h,"buffering")},s.prototype.adComplete=function(e){this.finishAd();var t=e.getAd(),i=this.adsLoaderManager.adEventObject(t);this.trigger("adComplete",i),this.adsLoaderManager.unbindEvents(["VOLUME_CHANGED"])},s.prototype.adClick=function(e){var t=this.adsLoaderManager.adsManager,i=e.getAd(),n=i.getContentType();"application/javascript"===n||"application/x-shockwave-flash"===n||(this.debugConsoleLog("[JW DEBUG] Ad paused due to ad click"),t.pause());var r=this.adsLoaderManager.adEventObject(i);this.trigger("adClick",r),this.pausedByViewable=!1},s.prototype.adPaused=function(e){this.paused||(this.paused=!0,this.triggerAdPlay(e.getAd(),"adPause",t,h))},s.prototype.adResumed=function(e){this.paused&&(this.paused=!1,this.triggerAdPlay(e.getAd(),c,h,t))},s.prototype.adSkipped=function(e){this.debugConsoleLog("[JW DEBUG] AdSkipped"),this.adsLoaderManager.unbindEvents(["COMPLETE","VOLUME_CHANGED"]),this.finishAd();var t=this.adsLoaderManager.adEventObject(e.getAd());this.trigger("adSkipped",t)},s.prototype.adUserClose=function(e){this.debugConsoleLog("[JW DEBUG] AdUserClose"),this.currentAd&&this.currentAd.isLinear()&&-1===this.currentAd.getDuration()?this.adSkipped(e):(this.adsLoaderManager.unbindEvents(["COMPLETE","VOLUME_CHANGED"]),this.finishAd())},s.prototype.allAdsCompleted=function(){this.resumeRequested(),this.view.adTakeDown(),this.stopAdsManager()},s.prototype.stopAdsManager=function(){var t=this;this.initAdsManagerPromise.then(function(e){t.destroyed()||(t.debugConsoleLog("[JW DEBUG] Stop IMA SDK adsManager"),e.stop(),e.destroy(),t.initAdsManagerPromise=null,t.bidsPromise=null)}).catch(function(){})},s.prototype.adLog=function(e){this.debugConsoleLog("[JW DEBUG]",e.type,e);var t=e.getAdData();if(t&&t.adError){var i=this.adsLoaderManager.adErrorEventObject(t.adError,e);402===i.code?this.handleAdError(t.adError,i):this.trigger(x,i)}},s.prototype.adError=function(e){var t=e.getError();this.handleAdError(t,e)},s.prototype.asyncError=function(e){var t=this;if(!this.destroyed())if(clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){return t.destroy()},0),e&&e.getError){var i=e.getError();this.handleAdError(i,e,!0)}else e.target&&e.target.src?console.error("Failed to load "+e.target.src):console.error(e)},s.prototype.handleAdError=function(e,t,i){var n=this;this.options.debug&&console.error(e),900===e.getErrorCode()||i?(clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){return n.destroy()},0)):(this.stopBlocking(),this.view.adTakeDown());var r=this.adsLoaderManager.adErrorEventObject(e,t);ye(r,this),this.player&&0===this.player.getPosition()&&(this._qoe.tick("adError"),r.timeLoading=this._qoe.between("adBeforePlay","adError")),this.trigger(x,r)},s.prototype.destroy=function(){if(this.debugConsoleLog("[JW DEBUG] JW Player destroy PlaylistItemManager"),this.off(),!this.destroyed()){this.player.off(null,null,this),this.bids&&this.bids.stop&&(this.bids.stop(),this.bids=null),clearTimeout(this.timeoutAdStart),clearInterval(this.progressIntervalId),this.currentAd=null,this.options=null,this.video=null,this.initAdsManagerPromise=null,this.bidsPromise=null;var e=this.adsLoaderManager;e&&(e.reset(),this.adsLoaderManager=null),this.blockingInstreamPlayer&&this.stopBlocking(),this.instreamProvider.off(),this.instreamProvider.setProxy(null),this.instreamProvider=null,this.view.adTakeDown(),this.view=null,this.player=null,this.item=null}},s.prototype.destroyed=function(){return!this.item},s}();function be(e){var i=this;i.video=e,i.blocked=!1;var n={},t=function(t){"function"==typeof e[t]?n[t]={get:function(){return function(){var e=i.video[t];if(e){if("pause"===t&&i.blocked)return;return e.apply(i.video,arguments)}}}}:n[t]={get:function(){return i.video[t]},set:function(e){i.video[t]=e}}};for(var r in e)t(r);Object.defineProperties(this,n)}function we(e){try{return e.getAdPodInfo()}catch(e){return null}}!function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}(be.prototype,{block:function(){this.blocked=!0},unblock:function(){this.blocked=!1}});var Ae=function(){function t(e){v(this,t),this.adsLoader=null,this.adDisplayContainer=null,this.displayInitialized=!1,this.adsRequest=null,this.userRequestContext=null,this.adsManager=null,this.adsManagerEvents={},this.container=e,this.adIds={},this.schedule=null,this.tagMap={},this.playerApi=null,this.videoProxy=null}return t.prototype.getVpaidMode=function(e){var t=google.ima.ImaSdkSettings.VpaidMode;return"disabled"===e||"none"===e?t.DISABLED:"enabled"===e?t.ENABLED:t.INSECURE},t.prototype.initializeDisplay=function(){this.videoProxy&&this.videoProxy.unblock(),!this.displayInitialized&&this.adDisplayContainer&&(this.adDisplayContainer.initialize(),this.displayInitialized=!0)},t.prototype.contentComplete=function(){if(null!==this.adsRequest){var e=this.adsLoader;e&&e.contentComplete(),this.adsRequest=null}},t.prototype.reset=function(){this.userRequestContext=null;var e=this.adsManager;e&&(e.destroy(),this.adsManager=null),this.contentComplete(!0),this.schedule=null,this.videoProxy&&this.videoProxy.block(),this.adsManagerEvents={},this.adIds={},this.tagMap={}},t.prototype.prepare=function(e){google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);var t=this.adsLoader;return t||(this.videoProxy=new be(e),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.container,this.videoProxy),t=this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer)),t},t.prototype.open=function(e,t,i,n,r){t.locale&&google.ima.settings.setLocale(t.locale),0<=t.maxRedirects&&google.ima.settings.setNumRedirects(t.maxRedirects);var o=this.prepare(r);this.playerApi=i;var a={requestType:e,vpaidMode:t.vpaidmode,playerVersion:i.version.split("+")[0]};this.userRequestContext=a;var s=t.getSchedule();if(!s)return Promise.reject();var d=new google.ima.AdsRequest,l=i.getSafeRegion(!1);d.linearAdSlotWidth=l.width,d.linearAdSlotHeight=l.height;var u=i.getSafeRegion(!0);d.nonLinearAdSlotWidth=u.width,d.nonLinearAdSlotHeight=u.height,d.setAdWillAutoPlay(i.getConfig().autostart&&!i.getEnvironment().OS.mobile),d.setAdWillPlayMuted(i.getMute()),d.forceNonLinearFullSlot=n.forceNonLinearFullSlot,this.adsRequest=d;var p=new y(i,n);if("object"==typeof s){var h=p.getTagList(s);1===h.length&&0===h[0].offset&&(s=h[0].tag)}return"string"==typeof s?s=d.adTagUrl=a.adTagUrl=g(s,i,n):(d.adsResponse=a.adsResponse=p.getAdsResponse(s),this.tagMap=p.getTagMap(s)),this.schedule=s,new Promise(function(e,t){o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t,!1),o.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e,!1)})},t.prototype.requestAds=function(){var e=this.adsLoader,t=this.userRequestContext,i=this.getVpaidMode(t.vpaidMode),n=e.getSettings();n.setPlayerType("jwplayer"),n.setPlayerVersion(t.playerVersion),n.setVpaidMode(i),e.requestAds(this.adsRequest,t)},t.prototype.getAdsManager=function(e,t,i){var n=new google.ima.AdsRenderingSettings;return n.loadVideoTimeout=i.loadVideoTimeout,n.enablePreloading=i.enablePreloading,n.uiElements=null,n.autoAlign=!0,n.useStyledNonLinearAds=!0,this.adsManager=e.getAdsManager(t,n),this.userRequestContext=e.getUserRequestContext(),this.adsManager},t.prototype.bindEvents=function(n){var r=this,o=google.ima.AdEvent.Type,a=google.ima.AdErrorEvent.Type;Object.keys(n).forEach(function(e){var t=o[e]||a[e],i=r.adsManagerEvents[t];i&&r.adsManager.removeEventListener(t,i),r.adsManager.addEventListener(t,n[e],!1),r.adsManagerEvents[t]=n[e]})},t.prototype.unbindEvents=function(e){var n=this,r=google.ima.AdEvent.Type,o=google.ima.AdErrorEvent.Type;e.forEach(function(e){var t=r[e]||o[e],i=n.adsManagerEvents[t];i&&(n.adsManager.removeEventListener(t,i),delete n.adsManagerEvents[t])})},t.prototype.getAdId=function(e){if(e){var t=e.getAdId(),i=we(e);if(i&&(t=""+i.getTimeOffset()),t)return void 0===this.adIds[t]&&(this.adIds[t]=(n=12,new Array(n+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,n))),this.adIds[t]}var n;return _},t.prototype.getTag=function(e,t){if("string"==typeof this.schedule)return this.schedule;var i=we(e);if(i){var n=this.tagMap[i.getTimeOffset()];if(n)return n}var r=this.userRequestContext;return t&&t.getUserRequestContext&&(r=t.getUserRequestContext()||r),r?r.adTagUrl||r.adsResponse||"":(console.error("invalid request context",r),"")},t.prototype.adEventObject=function(e){var t={client:C,tag:this.getTag(e),ima:{ad:e,userRequestContext:this.userRequestContext}};if(!e)return t;t.id=this.getAdId(e),t.adtitle=e.getTitle(),t.adsystem=e.getAdSystem(),t.creativetype=e.getContentType(),t.linear=e.isLinear()?"linear":"nonlinear",t.viewable=this.playerApi.getViewable();var i=we(e);if(i){var n=i.getTotalAds();1<n&&(t.sequence=i.getAdPosition(),t.podcount=n);var r=i.getTimeOffset(),o="mid";0===r?o="pre":-1===r&&(o="post"),t.adposition=o}return t},t.prototype.adErrorEventObject=function(e,t){var i=e.getMessage&&e.getMessage()||e.message,n=e.getVastErrorCode&&e.getVastErrorCode()||900,r=e.getErrorCode&&e.getErrorCode()||900;r<1e4&&(r+=2e4);var o=this.getTag(t.getAd&&t.getAd(),t);return{id:_,client:C,message:"Ad Error: "+i,code:n,adErrorCode:r,tag:o}},t}();!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controls-backdrop,.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-icon-fullscreen{display:none}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player.jw-flag-ads.jw-state-playing.jw-flag-touch:not(.jw-flag-ads-vpaid) .jw-controls .jw-controlbar,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display,.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-display-icon-display .jw-icon-display{pointer-events:none}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controlbar{background:0 0!important;flex-flow:column-reverse nowrap;height:100%;max-height:none;pointer-events:none}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-button-container{align-items:flex-end;flex-wrap:wrap;margin-bottom:7px}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-controlbar .jw-icon{height:30px}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-svg-icon{fill:#fff;filter:drop-shadow(0 0 3px #000)}.jwplayer.jw-flag-ads-googleima.jw-flag-small-player .jw-text{align-self:flex-start;margin:16px 0 0 16px;order:-1;text-shadow:0 0 3px #000;width:100%}"),(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(C,"8.1",function(d,r,e){var i=this,l=d.utils,t=d.getConfig(),u=new k(r||{},l),p=null,h=void 0,c=0;if(u.premiumAds){if(d.getMute()||t.autostart)return console.log("Premium Ads: Cannot play ads in autostart or muted"),void(this.destroy&&this.destroy());var n=function(){var e=(window.performance||{}).timing;if(e){var t=e.loadEventEnd||(new Date).getTime(),i=t-e.navigationStart;if(0<i)return i}return I}();if(I<=n)return console.log("Premium Ads: Page load took too long to start an ad"),void(this.destroy&&this.destroy())}R(l).then(function(){if(h){var e=D();0<=e&&I<=e-h&&(console.log("Premium Ads: IMA SDK load took too long to start an ad"),i.destroy&&i.destroy())}}).catch(l.noop);var s=d._,o=t.key;l.addClass(e,"jw-plugin-googima");var g=new j(e,d.id,l.style),f=new O(l,d.Events,g),m=new Ae(g.getAdDiv()),y=null;function v(e,t,i,n){try{return e.getCompanionAds(t,i,n)}catch(e){return[]}}function b(e){var t=new google.ima.CompanionAdSelectionSettings;t.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var i=u.companiondiv||{width:300,height:250},n=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push({width:n.getWidth(),height:n.getHeight(),type:"html",resource:n.getContent(),click:null})}return t}(v(e,i.width,i.height,t)),r=n.length;if(r){var o=y.adsLoaderManager.adEventObject(e);o.companions=n,d.trigger(L,o)}if(u.companiondiv){t=new google.ima.CompanionAdSelectionSettings,u.companionResourceType&&(t.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType[u.companionResourceType]);var a=v(e,u.companiondiv.width,u.companiondiv.height,t);r=Math.max(r,a.length),function(e){if(e&&e.length){var t=document.getElementById(u.companiondiv.id);if(t){var i=e[0];i&&(s.isFunction(i.getContent)?t.innerHTML=i.getContent():t.innerHTML=i.resource||i.content)}}}(a)}return 0<r}function a(){y&&!y.destroyed()&&(d.off(null,null,y),y.destroy(),y=null)}function w(e){y&&y.discardAdBreak(),m.contentComplete(),a(),e&&e.adschedule?u.adschedule=e.adschedule:u.adschedule=null,d.setCues([])}function A(e,t,i){var n,r,o,a=this,s=e.item||{};w(s),t!==M||(n=u.getAdRules(),r=0===n.frequency&&1===c,o=c>=n.startOn&&(c-n.startOn)%n.frequency==0,r||o)?(p||(p=d.createInstream().getMediaElement()),i.getSchedule()?(m.reset(),(y=new ve(s,u,d,f,g,m,p)).on("all",function(e,t){return d.trigger(e,t)}),y.init(t,i),y.on(T,function(e){b(e.ima.ad)}),d.once("beforePlay",function(e){if(u.premiumAds){var t=d.getHeight(),i=d.getWidth();if(t<270||i<480)return console.log("Premium Ads: Player size is smaller than 480x270 to play an ad"),void a.destroy();D()<0&&(h=Date.now())}y.beforePlay(e)},y).on("beforeComplete",function(){return y.beforeComplete()},y).on("time",function(e){return y.time(e)},y).on("resize",function(){return y.resize()},y).on("fullscreen",function(){return y.resize()},y)):R(l).then(function(){m.prepare(p)}).catch(l.noop)):u.adschedule=null}this.version="8.1.10",d.utils.extend(this,d.Events),d.pauseAd=function(e){y&&(e?y.pause():y.resume())},d.playAd=function(e){var t=l.extend({},r,{debug:u.debug});delete t.ad,delete t.tag,delete t.schedule,d._.isArray(e)?t.tag=e[0]:t.tag=e;var i=new k(t,l),n=y?y.blockingInstreamPlayer:null;n&&(n.noResume=!0),A({},S,i),y&&y.beforePlay(null)},d.on("ready",function(){R().catch(function(e){e.message.match(/Failed to load/)&&E("Ad playback blocked by an ad blocker",2e4)}),P.catch(function(e){E("Ad Error: "+e.message,60002)})},this).on("playlistItem",function(e){c++,A(e,M,u)},this).on("playlistComplete",function(){w()},this).on("cast",function(e){e.active&&w()},this).on("destroyPlugin",function(){i.destroy()},this);var P=B.call(this,l,o);P.catch(l.noop);var E=function(e,t){a(),d.off(null,null,i),d.playAd=l.noop,d.trigger(x,{id:_,client:C,message:e,code:900,adErrorCode:t,tag:""})};this.destroy=a,this.adsDebugMode=function(){u.debug=!0,y&&(y.debugConsoleLog=function(){var e;(e=console).log.apply(e,arguments)})}})}();
